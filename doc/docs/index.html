
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>ã€ã‚¯ãƒ©ã‚¦ãƒ‰è¶…å…¥é–€ã€‘JSåˆå¿ƒè€…å‘ã‘Firebaseãƒãƒ³ã‚ºã‚ªãƒ³</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="docs"
                  title="ã€ã‚¯ãƒ©ã‚¦ãƒ‰è¶…å…¥é–€ã€‘JSåˆå¿ƒè€…å‘ã‘Firebaseãƒãƒ³ã‚ºã‚ªãƒ³"
                  environment="web"
                  feedback-link="https://github.com/ree-rishun/handson-firebase-vanilla-js">
    
      <google-codelab-step label="Firebaseã¨ã¯ï¼Ÿ" duration="3">
        <h2 is-upgraded>ä»Šå›å­¦ã¶è£½å“ </h2>
<p>Firebaseã«ã¯18å€‹ä»¥ä¸Šã®è£½å“ãŒã‚ã‚Šã¾ã™ã€‚ ä»Šå›ã¯ãã®ä¸­ã‹ã‚‰3ã¤åˆ©ç”¨ã—ã¾ã™ã€‚  </p>
<h2 is-upgraded>Firebase Authentication </h2>
<p> Firebase Authenticationã¯ã€SNSãªã©ã®ä¼šå“¡æƒ…å ±ã‚’ç”¨ã„ãŸèªè¨¼ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å°å…¥ã§ãã¾ã™ã€‚  <a href="https://firebase.google.com/docs/auth?hl=ja" target="_blank">Firebase Authentication - Firebase</a>  </p>
<h2 is-upgraded>Firebase Hosting </h2>
<p> Firebase Hostingã¯ã€ä½œæˆã—ãŸWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç°¡å˜ã«ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚  <a href="https://firebase.google.com/products/hosting?hl=ja" target="_blank">Firebase Hosting - Firebase</a>  </p>
<h2 is-upgraded>Realtime Database </h2>
<p> Realtime Databaseã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ‡ãƒ¼ã‚¿ã‚’å…±æœ‰/åŒæœŸã§ãã‚‹NoSQLã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã™ã€‚  <a href="https://firebase.google.com/products/realtime-database?hl=ja" target="_blank">Firebase Realtime Database - Firebase</a><a href="https://qiita.com/t_nakayama0714/items/0ff7644666f0122cfba1" target="_blank">NoSQLã«ã¤ã„ã¦å‹‰å¼·ã™ã‚‹ã€‚ - Qiita</a>  </p>


      </google-codelab-step>
    
      <google-codelab-step label="æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆï¼ˆGUIã®å ´åˆï¼‰" duration="10">
        <p><a href="https://console.firebase.google.com/" target="_blank"><paper-button class="colored" raised>Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¸ç§»å‹•</paper-button></a>  ä»¥ä¸‹ã®ç”»é¢ãŒè¡¨ç¤ºã•ã‚ŒãŸã‹ã¨æ€ã„ã¾ã™ã®ã§ã€<strong>[ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ]</strong>ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚  <img src="img\ad7482501c84b89f.png">  </p>
<h2 is-upgraded>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã®æŒ‡å®š </h2>
<p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’æ±ºã‚ã¾ã™ã€‚ åŸºæœ¬çš„ã«åŠè§’è‹±æ•°å­—ã§æŒ‡å®šã—ã¦ãã ã•ã„ã€‚  <img src="img\9f1b67da805f330d.png">  å°šã€ã€Œ-!â€˜&#34;ã€ã®è¨˜å·ã¯ä½¿ç”¨ã§ãã¾ã™ã€‚   </p>
<h2 is-upgraded>Googleã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ </h2>
<p>ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã‚’OFFã«ã—ã¦ãã ã•ã„ã€‚ ãã®å¾Œã€[ç¶šè¡Œ]ã‚’æŠ¼ã—ã¦ä¸‹ã•ã„ã€‚  <img src="img\d49c050735644055.png">  </p>
<h2 is-upgraded>ä½œæˆå®Œäº† </h2>
<p>ä¸‹ã®ç”»é¢ã®ã‚ˆã†ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆãŒå®Œäº†ã—ãŸã‚‰[ç¶šè¡Œ]ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚  <img src="img\c04f0d7884160ca2.png">   </p>


      </google-codelab-step>
    
      <google-codelab-step label="Webã‚¢ãƒ—ãƒªã®è¿½åŠ ï¼ˆGUIã®å ´åˆï¼‰" duration="5">
        <p><img src="img\cf11b5444518c4a0.png">  åå‰ã‚’æŒ‡å®šã—ã¦ã€[ã“ã®ã‚¢ãƒ—ãƒªã®Firebase Hostingã‚‚è¨­å®šã—ã¾ã™ã€‚]ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¾ã™ã€‚  <img src="img\a608817c2e163d8a.png">  FirebaseSDKã‚’è¿½åŠ ã—ã¾ã™ã€‚ è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚  <img src="img\e4bdb4973a233958.png">  index.htmlã®headå†…ã®ã€ŒFirebase SDKã®è¿½åŠ éƒ¨åˆ†ã€ã«ãƒšãƒ¼ã‚¹ãƒˆã—ã¦ãã ã•ã„ã€‚  &#34;`html &lt;!DOCTYPE html&gt;     </p>
<pre><code>&lt;meta charset=&#34;utf-8&#34;&gt;
&lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1&#34;&gt;
&lt;title&gt;Welcome to Firebase Hosting&lt;/title&gt;
</code></pre>
<pre><code>&lt;!-- Firebase SDKã®è¿½åŠ éƒ¨åˆ† é–‹å§‹ --&gt;
&lt;!-- The core Firebase JS SDK is always required and must be listed first --&gt;
&lt;script src=&#34;/__/firebase/7.23.0/firebase-app.js&#34;&gt;&lt;/script&gt;
</code></pre>
<pre><code>&lt;!-- TODO: Add SDKs for Firebase products that you want to use
    https://firebase.google.com/docs/web/setup#available-libraries --&gt;
</code></pre>
<pre><code>&lt;!-- Initialize Firebase --&gt;
&lt;script src=&#34;/__/firebase/init.js&#34;&gt;&lt;/script&gt;
&lt;!-- Firebase SDKã®è¿½åŠ éƒ¨åˆ† çµ‚äº† --&gt;
</code></pre>
<pre><code>&lt;link rel=&#34;stylesheet&#34; href=&#34;./css/style.css&#34;&gt;
</code></pre>
<p> &#34;`  ç¶šã„ã¦FirebaseCLIã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«ã¤ã„ã¦å‡ºã¦ãã¾ã™ãŒã€ã“ã¡ã‚‰ã¯äº‹å‰æº–å‚™ã®éš›ã«è¡Œã£ã¦ã„ãŸã ã„ãŸå†…å®¹ã«ãªã‚Šã¾ã™ã®ã§ã€ãã®ã¾ã¾æ¬¡ã«é€²ã‚“ã§ã„ãŸã ã„ã¦å¤§ä¸ˆå¤«ã§ã™ã€‚  <img src="img\4193e304966eaf60.png">  ç¶šã„ã¦ã‚‚ã²ã¨ã¾ãšé£›ã°ã—ã¦ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¸é€²ã‚“ã§ãã ã•ã„ã€‚  <img src="img\f5820f11eac6849d.png">  ã“ã‚Œã§ã€Firebaseã¸ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¿½åŠ ãŒå®Œäº†ã—ã¾ã—ãŸã€‚   </p>


      </google-codelab-step>
    
      <google-codelab-step label="ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰" duration="3">
        <h2 is-upgraded>GitHubã‚’åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹æ–¹ </h2>
<p> ä»»æ„ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¦ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦ãã ã•ã„ã€‚  <code>console<br>git clone git@github.com:OthloTech/firebase-hands-on.git</code><br>  </p>
<h2 is-upgraded>GitHubã‚’åˆ©ç”¨ã•ã‚Œã¦ã„ãªã„æ–¹ </h2>
<p> ã¾ãšã¯ã€ä»¥ä¸‹ã®ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚  <a href="https://github.com/OthloTech/firebase-hands-on" target="_blank">OthloTech/firebase-hands-on - GitHub</a>  ç¶šã„ã¦ã€ç·‘è‰²ã®codeãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã€ã€ŒDownload ZIPã€ã‚’æŠ¼ã—ã¦ZIPãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚  <img src="img\87196144ff66680f.png">  ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸ zipãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã€ä¸­ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä»»æ„ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒšãƒ¼ã‚¹ãƒˆã—ã¦ãã ã•ã„ã€‚  </p>


      </google-codelab-step>
    
      <google-codelab-step label="Databaseã®è¨­å®š" duration="1">
        <pre><code>&#34;.read&#34;: false,
&#34;.write&#34;: false
</code></pre>
<p>} } <br><br><code>åˆæœŸçŠ¶æ…‹ã§ã</code>¯ã“ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚<br>ã“ã‚Œã‚’ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¦ãã ã•ã„ã€‚<br><br>json {   /* Visit https://firebase.google.com/docs/database/security to learn more about security rules. */   &#34;rules&#34;: { </p>
<pre><code>&#34;.read&#34;: true,
&#34;.write&#34;: true
</code></pre>
<p>} } &#34;`  ã“ã“ã§ä½•ã‚’å¤‰æ›´ã—ãŸã®ã‹ã¨ã„ã†ã¨ã€ </p>
<ul>
<li>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®èª­ã¿å–ã‚ŠãŒfalseï¼ˆèª°ã§ã‚‚èª­ã¿å–ã‚Šä¸å¯ï¼‰ã‚’trueï¼ˆèª°ã§ã‚‚èª­ã¿å–ã‚Šå¯ï¼‰ </li>
<li>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ›¸ãè¾¼ã¿ãŒfalseï¼ˆèª°ã§ã‚‚æ›¸ãè¾¼ã¿ä¸å¯ï¼‰ã‚’trueï¼ˆèª°ã§ã‚‚æ›¸ãè¾¼ã¿å¯ï¼‰ ã¨ã„ã†é¢¨ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚ã“ã‚Œã¯èª°ã§ã‚‚èª­ã¿æ›¸ããŒã§ãã‚‹ã¨ã„ã†ç‚¹ã§ã¯å®‰å…¨æ€§ã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚     ã‚µãƒ¼ãƒã¨ãƒ‡ãƒ—ãƒ­ã‚¤   <code>console<br>$ firebase deploy</code><br>  ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œå¾Œã€ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå®Œäº†ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«URLãŒã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚  <br><code>Hosting URL: https://xxxxxxxxxxx.web.app</code><br>  xxï½ã®éƒ¨åˆ†ã«ã¯æœ€åˆã«æŒ‡å®šã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®IDãŒå…¥ã£ã¦ãŠã‚Šã€ã“ã®ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨å®Ÿéš›ã«é–‹ç™ºã—ãŸã‚‚ã®ãŒç¢ºèªã§ãã¾ã™ã€‚  ã—ã‹ã—ã€æ¯å›ãƒ‡ãƒ—ãƒ­ã‚¤ã›ãšã¨ã‚‚ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚‚ã—ã£ã‹ã‚Šã¨ç¢ºèªã—ãŸã„ã§ã™ã‚ˆã­ï¼Ÿ ãã®å ´åˆã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚‚ç¢ºèªã§ãã¾ã™ã€‚  <code>console<br>$ firebase serve</code><br>  ä»Šå›ã®ãƒãƒ³ã‚ºã‚ªãƒ³ã§ã¯åŸºæœ¬çš„ã«ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ç¢ºèªã‚’è¡Œã„ãªãŒã‚‰é€²ã‚ã¦ã„ãã¾ã™ã€‚    Authenticationã®è¨­å®š   <strong>Authentication</strong>ã‚’é¸æŠã—ã€<strong>Sign-in method</strong>ã®ã‚¿ãƒ–ã‚’é–‹ã„ã¦ãã ã•ã„ã€‚  <img src="img\dcc88048f8867d5e.png">  èªè¨¼æ–¹æ³•ã®ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã®ã§ã€Googleã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚  <img src="img\6583e6150859bf3f.png">  è¡¨ç¤ºã•ã‚ŒãŸã‚‰ã€  </li>
</ul>
<ol type="1">
<li><strong>æœ‰åŠ¹ã«ã™ã‚‹</strong>ã‚’ONã« </li>
<li><strong>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚µãƒãƒ¼ãƒˆãƒ¡ãƒ¼ãƒ«</strong>ã‚’é¸æŠ </li>
<li><strong>ä¿å­˜</strong>ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚  <img src="img\4bfab42369f0350f.png">  ä»¥ä¸Šã§ Authentication ã®è¨­å®šã¯å®Œäº†ã§ã™ã€‚    Firebaseã®SDKã®èª­ã¿è¾¼ã¿   <code>public/index.html</code> ã‚’é–‹ãã€ä»¥ä¸‹ã®ã‚ˆã†ã« <code>&lt;!-- Firebaseã®SDK</code>è¿½åŠ éƒ¨åˆ† --&gt; ã®éƒ¨åˆ†ã«SDKã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚  <code>html<br>&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;meta charset=&#34;utf-8&#34;&gt;<br>&lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1&#34;&gt;<br>&lt;title&gt;ChatApp&lt;/title&gt;<br><br>&lt;!-- Firebaseã®SDKè¿½åŠ éƒ¨åˆ† é–‹å§‹ --&gt;<br>&lt;script defer src=&#34;/__/firebase/7.23.0/firebase-app.js&#34;&gt;&lt;/script&gt;<br>&lt;script defer src=&#34;/__/firebase/7.23.0/firebase-auth.js&#34;&gt;&lt;/script&gt;<br>&lt;script defer src=&#34;/__/firebase/7.23.0/firebase-database.js&#34;&gt;&lt;/script&gt;<br>&lt;script defer src=&#34;/__/firebase/init.js&#34;&gt;&lt;/script&gt;<br>&lt;!-- Firebaseã®SDKè¿½åŠ éƒ¨åˆ† çµ‚äº† --&gt;<br><br>&lt;link rel=&#34;stylesheet&#34; href=&#34;./css/style.css&#34;&gt;<br>&lt;link href=&#34;https://fonts.googleapis.com/css2?fam</code>ily=Noto+Sans+JP&amp;display=swap&#34; rel=&#34;stylesheet&#34;&gt;<br>&lt;/head&gt;<br>  <code>/__/firebase/firebase-app.js</code> ã¨ <code>/__/firebase/init.js</code> ã¯å¿…ãšå¿…è¦ã§ã™ãŒã€<code>/__/firebase/7.23.0/firebase-auth.js</code> ã‚„ <code>/__/firebase/7.23.0/firebase-database.js</code> ã¯åˆ©ç”¨ã™ã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã®ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚ˆã£ã¦å‘¼ã³å‡ºã™è£½å“ã¯å¤‰ã‚ã£ã¦ãã¾ã™ã€‚    èªè¨¼å‡¦ç†ã®ä½œæˆ     <h2 is-upgraded>èªè¨¼å‡¦ç†ã®ä½œæˆ </h2>
  <code>public/js/index.js</code> ã¸ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚  <code>javascript<br>// èªè¨¼å‡¦ç†ä½œæˆç®‡æ‰€<br>function auth() {<br>const provider = new firebase.auth.GoogleAuthProvider();<br>// Googleèªè¨¼ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º<br>firebase<br>.auth()<br>.signInWithPopup(provider)<br>.then((result) =&gt; {<br>  // èªè¨¼æˆåŠŸ<br>  alert(&#34;ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£</code>æºã«æˆåŠŸã—ã¾ã—ãŸ&#34;);<br>  console.log(result);<br>})<br>.catch(function (error) {<br>  // èªè¨¼å¤±æ•—<br>  alert(&#34;ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æºã«å¤±æ•—ã—ã¾ã—ãŸ&#34;);<br>  console.log({ error });<br>});<br>}<br>  ã“ã“ã§ã¯ã€Googleèªè¨¼ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’å‘¼ã³å‡ºã—èªè¨¼ã‚’è¡Œã£ãŸçµæœã‚’å—ã‘å–ã‚Šã¾ã™ã€‚  ï¼‘ï¼ Googleãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ  <code>javascript<br>const provider = new firebase.auth.GoogleAuthProvider();</code><br>  ï¼’ï¼ èªè¨¼å‡¦ç†  <code>javascript<br>firebase<br>.auth()<br>.signInWithPopup(provider)<br>.then((result) =&gt; {<br>  // èªè¨¼æˆåŠŸ<br>  alert(&#34;ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æºã«æˆåŠŸã—ã¾ã—ãŸ&#34;);<br>  console.log(result);<br>})<br>.catch(fun</code>ction (error) {<br>  // èªè¨¼å¤±æ•—<br>  alert(&#34;ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æºã«å¤±æ•—ã—ã¾ã—ãŸ&#34;);<br>  console.log({ error });<br>});<br>  ï¼“ï¼ æˆåŠŸã—ãŸå ´åˆã€èªè¨¼çµæœï¼ˆãƒ¦ãƒ¼ã‚¶æƒ…å ±ï¼‰ã‚’å—ã‘å–ã‚‹  <code>javascript<br>.then((result) =&gt; {<br>  // èªè¨¼æˆåŠŸ<br>  alert(&#34;ã‚¢ã‚</code>«ã‚¦ãƒ³ãƒˆé€£æºã«æˆåŠŸã—ã¾ã—ãŸ&#34;);<br>  console.log(result);<br>})<br>  ï¼”ï¼ å¤±æ•—ã—ãŸå ´åˆã€ã‚¨ãƒ©ãƒ¼ã‚’ã‚¢ãƒ©ãƒ¼ãƒˆã«ã¦è¡¨ç¤º  <code>javascript<br>.catch(function (error) {<br>  // èªè¨¼å¤±æ•—<br>  alert(&#34;ã‚¢ã‚</code>«ã‚¦ãƒ³ãƒˆé€£æºã«å¤±æ•—ã—ã¾ã—ãŸ&#34;);<br>  console.log({ error });<br>});<br>    <h2 is-upgraded>ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ãŸéš›ã«èªè¨¼ã‚’å‘¼ã³å‡ºã™ </h2>
   ä½œæˆã—ãŸèªè¨¼å‡¦ç†ã‚’ãƒšãƒ¼ã‚¸ã®ãƒ­ãƒ¼ãƒ‰æ™‚ã«å‘¼ã³å‡ºã™ã‚ˆã†ã«ã—ã¾ã™ã€‚ ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½è¨˜ã—ã¦ãã ã•ã„ã€‚  <code>javascript<br>// èªè¨¼ã®å‘¼ã³å‡ºã—ç®‡æ‰€<br>document.addEventListener(&#34;DOMContentLoaded&#34;, ()</code> =&gt; {<br>// DOMã®ãƒªãƒ­ãƒ¼ãƒ‰ãŒçµ‚ã‚ã£ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§èªè¨¼é–‹å§‹<br>auth();<br>});<br>  ã“ã®ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚Šã€ãƒšãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã‚€ãŸã³ã«èªè¨¼ã‚’è¡Œã†ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚    <h2 is-upgraded>ãƒ†ã‚¹ãƒˆ </h2>
   ãã‚Œã§ã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ä½œãƒã‚§ãƒƒã‚¯ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã—ã¦ãã ã•ã„ã€‚  <br><code>$ firebase serve</code><br>  ç¶šã„ã¦ã€localhost:5000ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚  <a href="http://localhost:5000" target="_blank"><paper-button class="colored" raised>ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ†ã‚¹ãƒˆ</paper-button></a>  ã™ã‚‹ã¨ã€æ—©é€Ÿãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã—ã¾ã„èªè¨¼ãŒå¤±æ•—ã—ã¦ã—ã¾ã„ã¾ã™ã€‚  <img src="img\99cfc0df85d799a5.png">  ãƒªãƒ³ã‚¯ãƒãƒ¼ã«ã‚ã‚‹ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€<strong>http://localhost:5000 ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã¨ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’å¸¸ã«è¨±å¯ã™ã‚‹</strong>ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã€<strong>å®Œäº†</strong>ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚  <img src="img\41e3fa641e8c9d8b.png">  ã™ã‚‹ã¨ã€ç”»åƒã®ã‚ˆã†ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚  <img src="img\c5cd784282d14f8a.png">  è‡ªèº«ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’é¸æŠã—ã€ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚ ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸã§ã™ï¼  <img src="img\a513ec637760ac30.png">     ãƒ¦ãƒ¼ã‚¶ä¸€è¦§ã®ä½œæˆ   Duration 00:10:00  å·¦å´ã«ãƒ¦ãƒ¼ã‚¶ä¸€è¦§ã‚’ä½œæˆã—ã¾ã™ã€‚  <img src="img\77b133da0c378f16.png">    <h2 is-upgraded>ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã®ç™»éŒ²å‡¦ç† </h2>
   ã¾ãšã¯ã€ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ›´æ–°ã—ã¾ã™ã€‚ å…ˆç¨‹ä½œæˆã—ãŸèªè¨¼å‡¦ç†ã¯Authenticationå´ãŒãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’æŒã£ã¦ã„ã¾ã™ã®ã§ã€ç¾çŠ¶ã§ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…ã¯ç©ºã§ã™ã€‚ ãã®ãŸã‚ã€ãƒ¦ãƒ¼ã‚¶ç™»éŒ²ã•ã‚ŒãŸå†…å®¹ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸æ ¼ç´ã™ã‚‹å‡¦ç†ã‚’è¿½åŠ ã—ã¾ã™ã€‚  &#34;`javascript // â€”â€“ ãƒ¦ãƒ¼ã‚¶æƒ…å ±ç™»éŒ²/æ›´æ–°å‡¦ç† â€”â€“ // function updateUserinfo(user) { const userDb = firebase.database().ref(&#34;users/&#34; + user.uid);  userDb.set({   <pre><code>uid: user.uid,
displayName: user.displayName,
photoURL: user.photoURL,
</code></pre>
}); } <br><br><code>ã“ã“ã§ã¯ã€ `set()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã¦ã€å€¤</code>ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸æ ¼ç´ã—ã¦ã„ã¾ã™ã€‚<br>ã‚»ãƒƒãƒˆã—ãŸå€¤ã¯ users/XXXXXX(ãƒ¦ãƒ¼ã‚¶ID) ã«æ ¼ç´ã•ã‚Œã¾ã™ã€‚<br>ã‚‚ã—æ—¢ã«åŒã˜ãƒ¦ãƒ¼ã‚¶IDãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ä¸Šæ›¸ã•ã‚Œã¾ã™ã€‚<br><br>ã¾ãŸã€å…ˆç¨‹è¿½åŠ ã—ãŸã‚³ãƒ¼ãƒ‰ã‚‚ä¸€éƒ¨ä¿®æ­£ã—ã¾ã™ã€‚<br><br>javascript // â€”â€“ èªè¨¼å‡¦ç†ä½œæˆç®‡æ‰€ â€”â€“ // function auth() { const provider = new firebase.auth.GoogleAuthProvider(); // Googleèªè¨¼ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º firebase   .auth()   .signInWithPopup(provider)   .then((result) =&gt; {   <pre><code>// æ–°è¦ã‚³ãƒ¼ãƒ‰è¿½åŠ éƒ¨åˆ†
console.log({ result });
updateUserinfo(result.user);
</code></pre>
})   .catch(function (error) {   <pre><code>// èªè¨¼å¤±æ•—
alert(&#34;ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æºã«å¤±æ•—ã—ã¾ã—ãŸ&#34;);
console.log({ error });
</code></pre>
}); } &#34;<br><br>// æ–°è¦ã‚³ãƒ¼ãƒ‰è¿½åŠ éƒ¨åˆ†`ã¨æ›¸ã„ã¦ã‚ã‚‹éƒ¨åˆ†ã‚’å…ƒã€…ã®å†…å®¹ã‚’å‰Šé™¤ã—ã€2è¡Œã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚ è¿½åŠ ãŒå®Œäº†å¾Œã€å†åº¦ localhost:5000 ã¸ã‚¢ã‚¯ã‚»ã‚¹ã—ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã¿ã¦ãã ã•ã„ã€‚  ãƒ­ã‚°ã‚¤ãƒ³ãŒå®Œäº†ã—ãŸã‚‰ã€Firebaseã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¸ã‚¢ã‚¯ã‚»ã‚¹ã—ã€<strong>Realtime Database</strong> ã‚’é–‹ã„ã¦ãã ã•ã„ã€‚ ä»¥ä¸‹ã®ã‚ˆã†ã« usersãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚Œã°OKã§ã™ã€‚  <img src="img\ed2cc49f7b290888.png">     <h2 is-upgraded>ãƒ¦ãƒ¼ã‚¶ä¸€è¦§ã‚’è¡¨ç¤º </h2>
   RealTimeDatabase ã¸ä¿å­˜ã—ãŸãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚  &#34;`javascript // â€”â€“ ãƒ¦ãƒ¼ã‚¶ä¸€è¦§è¡¨ç¤ºå‡¦ç† â€”â€“ // function renderUserslist(user) { const usersElm = document.querySelector(&#34;#users_list&#34;);  // ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•° return (snapshot) =&gt; {   <pre><code>const newUsers = [];
</code></pre>
<pre><code>// è‡ªèº«ã‚’è¿½åŠ 
newUsers.push(`
  &lt;div class=&#34;users_list__box-me&#34;&gt;
    &lt;div class=&#34;users_list__icon&#34;&gt;
      &lt;img src=&#34;${escapeHTML(user.photoURL)}&#34; /&gt;
    &lt;/div&gt;&lt;div class=&#34;users_list__status&#34;&gt;
      &lt;p class=&#34;users_list__name&#34;&gt;${escapeHTML(user.displayName)}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
`);
</code></pre>
<pre><code>// ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’ä¸€ã¤ãšã¤å–å¾—ã—ã€è¡¨ç¤ºç”¨HTMLã‚’çµ„ã¿ç«‹ã¦
snapshot.forEach((send_user) =&gt; {
    // è‡ªåˆ†ä»¥å¤–ã®ãƒ¦ãƒ¼ã‚¶ã®ã¿è¿½åŠ 
    if (user.uid !== send_user.val().uid) {
        newUsers.push(`
  &lt;div class=&#34;users_list__box&#34;&gt;
    &lt;div class=&#34;users_list__icon&#34;&gt;
      &lt;img src=&#34;${escapeHTML(send_user.val().photoURL)}&#34; /&gt;
    &lt;/div&gt;&lt;div class=&#34;users_list__status&#34;&gt;
      &lt;p class=&#34;users_list__name&#34;&gt;${escapeHTML(send_user.val().displayName)}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
`);
    }
});
// ãƒ¦ãƒ¼ã‚¶ä¸€è¦§è¡¨ç¤ºã‚¨ãƒªã‚¢ã«æç”»
usersElm.innerHTML = `
</code></pre>
<pre><code>${newUsers.join(&#34;&#34;)}
</code></pre>
 `;   <pre><code>// ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æœ€ä¸‹éƒ¨ã¸ç§»å‹•
usersElm.scrollTop = usersElm.scrollHeight;
</code></pre>
} } <br><br><code>å°‘ã—ã‚³ãƒ¼ãƒ‰ãŒé•·ããªã£ã¦ã—ã¾ã„ã¾ã—ãŸãŒã€</code>è¦ã¯ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’å–å¾—ã—ã€HTMLã¨çµåˆã•ã›ã¦æç”»ã—ã¦ã„ã¾ã™ã€‚<br>è‡ªèº«ã®æƒ…å ±ã¯å¿…ãšä¸€ç•ªä¸Šã«æ¥ã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã€ä¸€ç•ªæœ€åˆã«æ ¼ç´ã—ã¦ã„ã¾ã™ã€‚<br>å…¨ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’æç”»ã™ã‚‹éš›ã«ã¯è‡ªèº«ã®æƒ…å ±ã¯é£›ã°ã™ç”¨ã« ifæ–‡ã‚’ç”¨ã„ã¦åˆ†å²ã—ã¦ã„ã¾ã™ã€‚<br><br>ç¶šã„ã¦ã€ãƒ¦ãƒ¼ã‚¶æƒ…å ±æ›´æ–°å‡¦ç†å´ã«ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚<br><br>javascript // â€”â€“ ãƒ¦ãƒ¼ã‚¶æƒ…å ±ç™»éŒ²/æ›´æ–°å‡¦ç† â€”â€“ // function updateUserinfo(user) { const userDb = firebase.database().ref(&#34;users/&#34; + user.uid);  userDb.set({   <pre><code>uid: user.uid,
displayName: user.displayName,
photoURL: user.photoURL,
</code></pre>
});  // æ–°è¦ã‚³ãƒ¼ãƒ‰è¿½åŠ éƒ¨åˆ† const usersDb = firebase.database().ref(&#34;users&#34;); usersDb.on(&#34;value&#34;, renderUserslist(user)); } &#34;<br><br><code>æœ«å°¾2è¡Œ</code>ãŒæ–°ãŸã«è¿½åŠ ã—ãŸéƒ¨åˆ†ã§ã™ã€‚<br>ä½¿ç”¨ã—ã¦ã„ã‚‹on()` ãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã‚Šãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å¤‰æ›´ã‚’ç›£è¦–ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚ ãã®ãŸã‚ã€æ–°ã—ããƒ¦ãƒ¼ã‚¶ãŒè¿½åŠ ã•ã‚ŒãŸå ´åˆã‚‚ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ãªãè¿½åŠ ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚    <h2 is-upgraded>å®Ÿéš›ã«è¡¨ç¤ºã—ã¦ã¿ã‚‹ </h2>
   ã•ã¦ã€å†ã³ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ ãƒ­ã‚°ã‚¤ãƒ³å¾Œã€å·¦å´ã«è‡ªåˆ†ã®ã‚¢ã‚¤ã‚³ãƒ³ã¨åå‰ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°å®Œäº†ã§ã™ã€‚     ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€ä¿¡å‡¦ç†ä½œæˆ   Duration 00:10:00  ç¶šã„ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€ä¿¡å‡¦ç†ã‚’ä½œæˆã—ã¾ã™ã€‚    <h2 is-upgraded>é€ä¿¡å‡¦ç†éƒ¨åˆ†ä½œæˆ </h2>
   ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚  &#34;`javascript // â€”â€“ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡å‡¦ç†ç®‡æ‰€ â€”â€“ // function enableMessages(user) { const messagesDb = firebase.database().ref(&#34;messages&#34;);  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ² const messageTextInput = document.querySelector(&#34;#message-text&#34;); const messageButton = document.querySelector(&#34;#message-submit-button&#34;);  // é€ä¿¡ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸå ´åˆ messageButton.addEventListener(&#34;click&#34;, () =&gt; {   <pre><code>// DBã¸æ–°è¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç™»éŒ²
messagesDb.push({
    userId: user.uid,
    date: new Date().getTime(), // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ã‚»ãƒƒãƒˆ (ä¾‹ï¼š1602862031298)
    text: messageTextInput.value,
});
// ãƒ•ã‚©ãƒ¼ãƒ ã®å†…å®¹ã‚’ãƒªã‚»ãƒƒãƒˆ
messageTextInput.value = &#34;&#34;;
</code></pre>
}); } &#34;<br><br><code>ã“ã“ã§ã¯ã€é€ä¿¡</code>ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸéš›ã«ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢å†…ã®æ–‡å­—åˆ—ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦ä¿å­˜ã™ã‚‹å‡¦ç†ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚<br>push()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã“ã¨ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…ã® message ç›´ä¸‹ã«  </li>
</ol>
<ul>
<li>ãƒ¦ãƒ¼ã‚¶ID </li>
<li>é€ä¿¡æ—¥æ™‚ </li>
<li>é€ä¿¡å†…å®¹  ãŒæ ¼ç´ã•ã‚Œã¾ã™ã€‚ å°šã€ <code>push()</code> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’åˆ©ç”¨ã—ãŸå ´åˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¯ã®IDã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªIDã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«æŒ¯ã‚Šåˆ†ã‘ã‚‰ã‚Œã¾ã™ã€‚     <h2 is-upgraded>å‘¼ã³å‡ºã—éƒ¨åˆ†ã®è¿½åŠ  </h2>
   é€ä¿¡å‡¦ç†éƒ¨åˆ†ã‚’ä½œæˆã—ã¾ã—ãŸã®ã§ã€ç¶šã„ã¦é€ä¿¡å‡¦ç†ã‚’å‘¼ã³å‡ºã™éƒ¨åˆ†ã‚’è¿½è¨˜ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚  &#34;`javascript // â€”â€“ èªè¨¼å‡¦ç†ä½œæˆç®‡æ‰€ â€”â€“ // function auth() { const provider = new firebase.auth.GoogleAuthProvider(); // Googleèªè¨¼ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º firebase   .auth()   .signInWithPopup(provider)   .then((result) =&gt; {   <pre><code>console.log({ result });
updateUserinfo(result.user);
</code></pre>
<pre><code>// æ–°è¦ã‚³ãƒ¼ãƒ‰è¿½åŠ éƒ¨åˆ†
enableMessages(result.user);
</code></pre>
})   .catch(function (error) {   <pre><code>// èªè¨¼å¤±æ•—
alert(&#34;ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æºã«å¤±æ•—ã—ã¾ã—ãŸ&#34;);
console.log({ error });
</code></pre>
}); } &#34;<br><br>// æ–°è¦ã‚³ãƒ¼ãƒ‰è¿½åŠ éƒ¨åˆ†` ã®å¾Œã‚ã®1è¡Œã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚     <h2 is-upgraded>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ ¼ç´ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª </h2>
   ã“ã“ã¾ã§å®Œäº†ã—ãŸã‚‰ã€ä¸€åº¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ é€ä¿¡ã—ã¦ã‚‚ä½•ã‚‚è¡¨ç¤ºã•ã‚Œãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚ ã—ã‹ã—ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å†åº¦é–‹ã„ã¦ã‚‚ã‚‰ã†ã¨ messages ãŒæ–°ãŸã«è¿½åŠ ã•ã‚Œã¦ãŠã‚Šã€å†…å®¹ãŒç¢ºèªã§ãã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚  <img src="img\54ab95edbacac5a1.png">  ã“ã‚Œã§é€ä¿¡å‡¦ç†ã®å®Œæˆã§ã™ã€‚     ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤ºå‡¦ç†   Duration 00:10:00  å…ˆç¨‹è¿½åŠ ã—ãŸé€ä¿¡å‡¦ç†ã§é€ä¿¡ã—ãŸå†…å®¹ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ã‹ã‚‰é€ä¿¡ã•ã‚ŒãŸå†…å®¹ã‚’è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«å‡¦ç†ã‚’è¿½åŠ ã—ã¾ã™ã€‚    <h2 is-upgraded>ãƒ¦ãƒ¼ã‚¶ä¸€è¦§ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã§ç®¡ç† </h2>
   ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã¯é€ä¿¡ã—ãŸãƒ¦ãƒ¼ã‚¶ã«é–¢ã™ã‚‹æƒ…å ±ãŒã€ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªIDã—ã‹ã‚ã‚Šã¾ã›ã‚“ã€‚ ãã®ãŸã‚ã€ãƒ¦ãƒ¼ã‚¶åã‚„ã‚¢ã‚¤ã‚³ãƒ³ã‚’å–å¾—ã™ã‚‹ã«ã¯ãƒ¦ãƒ¼ã‚¶ã®æƒ…å ±ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ ã¾ãšã¯ã€ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’æ ¼ç´ã™ã‚‹å¤‰æ•°ã‚’ç”¨æ„ã—ã¾ã™ã€‚  <code>javascript<br>// ----- ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•° ----- //</code><br>let usersList = []; // ãƒ¦ãƒ¼ã‚¶ä¸€è¦§<br>  ç¶šã„ã¦ã€ãƒ¦ãƒ¼ã‚¶ä¸€è¦§è¡¨ç¤ºå‡¦ç† ã« <code>// æ–°</code>è¦ã‚³ãƒ¼ãƒ‰è¿½åŠ éƒ¨åˆ† ã®1è¡Œå‡¦ç†ã‚’è¿½åŠ ã—ã¾ã™ã€‚  &#34;`javascript // â€”â€“ ãƒ¦ãƒ¼ã‚¶ä¸€è¦§è¡¨ç¤ºå‡¦ç† â€”â€“ // function renderUserslist(user) { const usersElm = document.querySelector(&#34;#users_list&#34;);  // ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•° return (snapshot) =&gt; {   <pre><code>const newUsers = [];
</code></pre>
<pre><code>// æ–°è¦ã‚³ãƒ¼ãƒ‰è¿½åŠ éƒ¨åˆ†
usersList = snapshot.val();
</code></pre>
<pre><code>// è‡ªèº«ã‚’è¿½åŠ 
newUsers.push(`
  &lt;div class=&#34;users_list__box-me&#34;&gt;
    &lt;div class=&#34;users_list__icon&#34;&gt;
      &lt;img src=&#34;${escapeHTML(user.photoURL)}&#34; /&gt;
    &lt;/div&gt;&lt;div class=&#34;users_list__status&#34;&gt;
      &lt;p class=&#34;users_list__name&#34;&gt;${escapeHTML(user.displayName)}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
`);
</code></pre>
<pre><code>// ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’ä¸€ã¤ãšã¤å–å¾—ã—ã€è¡¨ç¤ºç”¨HTMLã‚’çµ„ã¿ç«‹ã¦
snapshot.forEach((send_user) =&gt; {
    // è‡ªåˆ†ä»¥å¤–ã®ãƒ¦ãƒ¼ã‚¶ã®ã¿è¿½åŠ 
    if (user.uid !== send_user.val().uid) {
        newUsers.push(`
  &lt;div class=&#34;users_list__box&#34;&gt;
    &lt;div class=&#34;users_list__icon&#34;&gt;
      &lt;img src=&#34;${escapeHTML(send_user.val().photoURL)}&#34; /&gt;
    &lt;/div&gt;&lt;div class=&#34;users_list__status&#34;&gt;
      &lt;p class=&#34;users_list__name&#34;&gt;${escapeHTML(send_user.val().displayName)}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
`);
    }
});
// ãƒ¦ãƒ¼ã‚¶ä¸€è¦§è¡¨ç¤ºã‚¨ãƒªã‚¢ã«æç”»
usersElm.innerHTML = `
</code></pre>
<pre><code>${newUsers.join(&#34;&#34;)}
</code></pre>
 `;   <pre><code>// ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æœ€ä¸‹éƒ¨ã¸ç§»å‹•
usersElm.scrollTop = usersElm.scrollHeight;
</code></pre>
} } &#34;`  ã“ã‚Œã§ã€ãƒ¦ãƒ¼ã‚¶æƒ…å ±ä¸€è¦§ã®å–å¾—ãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚     <h2 is-upgraded>è¡¨ç¤ºå‡¦ç†éƒ¨åˆ†ã®è¿½åŠ  </h2>
   ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚  &#34;` javascript // â€”â€“ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºå‡¦ç†ç®‡æ‰€ â€”â€“ // function renderMessages(user) { const messagesElm = document.querySelector(&#34;#chat-messages&#34;); // ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•° return (snapshot) =&gt; {   <pre><code>const newMessages = [];
// messageã‚’ä¸€ã¤ãšã¤å–å¾—ã—ã€è¡¨ç¤ºç”¨HTMLã‚’çµ„ã¿ç«‹ã¦
snapshot.forEach((message) =&gt; {
</code></pre>
<pre><code>    if (user.uid === message.val().userId) {
        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€ä¿¡è€…ãŒè‡ªåˆ†ã®å ´åˆ
        newMessages.push(`
  &lt;div class=&#34;chat-message-me&#34;&gt;
    &lt;div class=&#34;chat-message__text&#34;&gt;
      &lt;div class=&#34;chat-message__text-message&#34;&gt;
        ${escapeHTML(message.val().text)}
      &lt;/div&gt;
      &lt;div class=&#34;chat-message__text-date&#34;&gt;
        ${escapeHTML(formatDate(new Date(message.val().date)))}
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
`);
    } else {
        // è‡ªåˆ†ä»¥å¤–ãŒé€ä¿¡ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å ´åˆ
        newMessages.push(`
  &lt;div class=&#34;chat-message-you&#34;&gt;
    &lt;div class=&#34;chat-message__icon&#34;&gt;
      &lt;img src=&#34;${escapeHTML(usersList[message.val().userId].photoURL)}&#34; /&gt;
    &lt;/div&gt;
    &lt;div class=&#34;chat-message__text&#34;&gt;
      &lt;div class=&#34;chat-message__text-user-name&#34;&gt;
        ${escapeHTML(usersList[message.val().userId].displayName)}
      &lt;/div&gt;
      &lt;div class=&#34;chat-message__text-message&#34;&gt;
        ${escapeHTML(message.val().text)}
      &lt;/div&gt;
      &lt;div class=&#34;chat-message__text-date&#34;&gt;
        ${escapeHTML(formatDate(new Date(message.val().date)))}
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
`);
    }
});
// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢ã«æç”»
messagesElm.innerHTML = `
</code></pre>
<pre><code>${newMessages.join(&#34;&#34;)}
</code></pre>
 `;   <pre><code>// ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æœ€ä¸‹éƒ¨ã¸ç§»å‹•
messagesElm.scrollTop = messagesElm.scrollHeight;
</code></pre>
} } &#34;`  ã“ã¡ã‚‰ã®å‡¦ç†ã¯ã€å…ˆç¨‹ãƒ¦ãƒ¼ã‚¶ä¸€è¦§ã‚’è¡¨ç¤ºã—ãŸéš›ã®å‡¦ç†å†…å®¹ã¨ãŠãŠã¾ã‹ãªæµã‚Œã¯åŒã˜ã§ã™ã€‚    <h2 is-upgraded>å‘¼ã³å‡ºã—éƒ¨åˆ†ã®è¿½åŠ  </h2>
   ä»¥ä¸‹ã® <code>// æ–°</code>è¦ã‚³ãƒ¼ãƒ‰è¿½åŠ éƒ¨åˆ† ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚  &#34;`javascript // â€”â€“ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡å‡¦ç†ç®‡æ‰€ â€”â€“ // function enableMessages(user) { const messagesDb = firebase.database().ref(&#34;messages&#34;);  // æ–°è¦ã‚³ãƒ¼ãƒ‰è¿½åŠ éƒ¨åˆ† messagesDb.on(&#34;value&#34;, renderMessages(user));  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ² const messageTextInput = document.querySelector(&#34;#message-text&#34;); const messageButton = document.querySelector(&#34;#message-submit-button&#34;);  // é€ä¿¡ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸå ´åˆ messageButton.addEventListener(&#34;click&#34;, () =&gt; {   <pre><code>// DBã¸æ–°è¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç™»éŒ²
messagesDb.push({
    userId: user.uid,
    date: new Date().getTime(), // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ã‚»ãƒƒãƒˆ (ä¾‹ï¼š1602862031298)
    text: messageTextInput.value,
});
// ãƒ•ã‚©ãƒ¼ãƒ ã®å†…å®¹ã‚’ãƒªã‚»ãƒƒãƒˆ
messageTextInput.value = &#34;&#34;;
</code></pre>
}); } &#34;<br><br><code>ã“ã¡ã‚</code>‰ã‚‚ãƒ¦ãƒ¼ã‚¶ä¸€è¦§ã‚’è¡¨ç¤ºã—ãŸéš›ã¨åŒã˜ãã€on()<code>ãƒ¡ã‚½</code>ãƒƒãƒ‰ã‚’åˆ©ç”¨ã—ã¦ã€å¤‰æ›´ãŒã‚ã£ãŸéš›ã«renderMessages()` ã‚’å‘¼ã³å‡ºã™ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚    <h2 is-upgraded>å‹•ä½œç¢ºèªã‚’ã—ã¦ã¿ã‚‹ </h2>
   ãã‚Œã§ã¯ã€å®Ÿéš›ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã£ã¦ã¿ã¾ã™ã€‚  <img src="img\61abc8178a9b3eb8.png">  åˆ¥ã®ã‚¿ãƒ–ã§æ–°ã—ãé–‹ã„ã¦ã€åˆ¥ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã‹ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ä»–ã®äººã«å…±æœ‰ã™ã‚‹ã“ã¨ã§ä»–ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ã‚‚ãƒãƒ£ãƒƒãƒˆã§ãã¾ã™ã€‚  â–¼ãƒ‡ãƒ—ãƒ­ã‚¤ã‚³ãƒãƒ³ãƒ‰  <code>console<br>$ firebase deploy</code><br>    ã¾ã¨ã‚   Duration 00:05:00  ãƒãƒ³ã‚ºã‚ªãƒ³ãŠç–²ã‚Œæ§˜ã§ã—ãŸã€‚  ä»Šå›ã®ãƒãƒ³ã‚ºã‚ªãƒ³ã§ã¯ã€Firebaseã®æ©Ÿèƒ½ã¨ã—ã¦ã¯ã€  </li>
<li>Firebase CLI   <ul>
<li>Firebaseã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ä½œæˆ / ç·¨é›† / æ“ä½œã§ãã‚‹ãƒ„ãƒ¼ãƒ« </li>
</ul>
</li>
<li>Firebase Hosting   <ul>
<li>Webã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹ </li>
</ul>
</li>
<li>Firebase Authentication   <ul>
<li>èªè¨¼ã‚’å°å…¥ã§ãã‚‹ </li>
</ul>
</li>
<li>Realtime Database   <ul>
<li>NoSQLã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å°å…¥ã§ãã‚‹ </li>
<li>åŒæœŸã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹  ã‚’å®Ÿéš›ã«ä½¿ç”¨ã—ã¾ã—ãŸã€‚  ã¾ãŸã€RealTimeDatabaseã§ã¯ä»¥ä¸‹ã®3ã¤ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã—ãŸã€‚  </li>
</ul>
</li>
<li><code>on()</code> : ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ç›£è¦–ã—å¤‰æ›´ç­‰ã‚’åŒæœŸã§ãã‚‹ </li>
<li><code>set()</code> : ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®æ–°è¦è¿½åŠ  / æ›´æ–°ãŒå¯èƒ½ </li>
<li><code>push()</code> : ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®æ–°è¦è¿½åŠ ãŒå¯èƒ½ï¼ˆIDã¯ãƒ©ãƒ³ãƒ€ãƒ ï¼‰  Firebaseã®æ©Ÿèƒ½ã¯å‹¿è«–ã“ã‚Œã ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ ãŸã ã€ä¸€éƒ¨åˆ†ã‚’è§¦ã£ãŸã ã‘ã§ã‚‚ã‚ã‹ã‚‹é€šã‚Šã€ç°¡å˜ã«å®Ÿè£…ã§ãã€é«˜å“è³ªã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ è¶£å‘³ã®é–‹ç™ºã‚„ãƒãƒƒã‚«ã‚½ãƒ³ã‚„ã‚³ãƒ³ãƒ†ã‚¹ãƒˆç­‰ã§å°å…¥ã—ã¦ã¿ã¦ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ï¼Ÿ       Firebaseã®DBã€Realtime Database vs Cloud Firestore     <h2 is-upgraded>å…±é€šã®å¼·ã¿ </h2>
    <h3 is-upgraded>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ </h3>
  </li>
<li>DBå´ã®å¤‰æ›´ãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é€šçŸ¥ã•ã‚Œã‚‹  TODO: GIFã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹    <h3 is-upgraded>ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¹ </h3>
  </li>
<li>ã‚¹ã‚­ãƒ¼ãƒã¨ã¯ï¼Ÿ   <ul>
<li>ãƒ‡ãƒ¼ã‚¿ã®æ§‹é€  </li>
</ul>
</li>
<li>ã€Œã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¹ã€ï¼ã€Œãƒ‡ãƒ¼ã‚¿ã‚’è‡ªç”±ã«çªã£è¾¼ã‚ã‚‹ï¼ã€ </li>
<li>æ¥½ã ã‘ã©æ³¨æ„ãŒå¿…è¦ï¼   <ul>
<li>ãƒ‡ãƒ¼ã‚¿ã®ä¸­èº«ãŒãƒãƒ©ãƒãƒ©ã«ãªã£ã¦ã—ã¾ã†å±é™ºæ€§ãŒã‚ã‚‹    <h2 is-upgraded>Realtime Databaseã®ç‰¹å¾´ </h2>
    <h3 is-upgraded>æƒ…å ±æ§‹é€  </h3>
  </li>
</ul>
</li>
<li>ã»ã¼JSON     <h2 is-upgraded>Firestoreã®ç‰¹å¾´ </h2>
    <h3 is-upgraded>æƒ…å ±æ§‹é€  </h3>
  </li>
<li>ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³/ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ    <h2 is-upgraded>çµå±€ã©ã£ã¡ãŒè‰¯ã„ã‹ï¼Ÿ </h2>
  </li>
<li>Firestoreã‚’ä½¿ã†ã‚·ãƒ¼ãƒ³   </li>
<li>RealtimeDatabaseã‚’ä½¿ã†ã‚·ãƒ¼ãƒ³   <ul>
<li>    å‚è€ƒã«ã—ãŸè¨˜äº‹   </li>
</ul>
</li>
<li><a href="https://firebase.google.com/docs/firestore/firestore-for-rtdb?hl=ja" target="_blank">Firebase Realtime Database ã§ Cloud Firestore ã‚’ä½¿ç”¨ã™ã‚‹ - Firebase</a></li>
<li><a href="https://firebase.google.com/docs/database/rtdb-vs-firestore?hl=ja" target="_blank">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’é¸æŠ: Cloud Firestore ã¾ãŸã¯ Realtime Database</a></li>
<li><a href="https://techblog.kayac.com/rtdb-vs-firestore" target="_blank">Firebase Realtime Databaseã¨Firestoreã‚’ä½¿ã„åˆ†ã‘ã¦ã„ã“ã†ãªã¨ã„ã†è©± - KAYAC</a></li>
</ul>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

</body>
</html>
